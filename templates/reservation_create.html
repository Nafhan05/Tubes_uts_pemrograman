{% extends "base.html" %}

{% block content %}
<div class="min-h-screen bg-custom-background bg-cover bg-center">
  <header class="bg-gradient-to-r from-blue-600 via-blue-500 to-purple-600 text-white shadow-md py-4 fixed w-full top-0 z-10">
    <div class="container mx-auto flex justify-between items-center px-6 space-x-8">
      <div class="flex items-center space-x-8">
        <a href="{{ url_for('routes.home') }}" class="font-bold text-xl whitespace-nowrap">Health+</a>
        <nav class="flex space-x-6 items-center">
          <a href="{{ url_for('routes.home') }}" class="hover:underline">Home</a>
          <a href="{{ url_for('routes.reservation_create') }}" class="hover:underline">Make an Appointment</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="pt-24 py-10">
    <div class="container mx-auto px-6 bg-white bg-opacity-75 p-8 rounded shadow-md">
      <h2 class="text-2xl font-bold text-blue-600 mb-6">Create Reservation</h2>

      <!-- Jika sudah ada reservasi -->
      {% if existing_reservation %}
        <div class="mb-4">
          <h3 class="text-xl text-blue-600">Your Existing Reservation</h3>
          <p><strong>Date:</strong> {{ existing_reservation.reservation_date }}</p>
          <p><strong>Time:</strong> {{ existing_reservation.reservation_time }}</p>
          <p><strong>Tests:</strong> {{ existing_reservation.tests }}</p>
        </div>
      {% endif %}

      <!-- Form reservasi -->
      <form method="POST" action="{{ url_for('routes.reservation_create') }}" id="reservation-form">
        {{ form.hidden_tag() }}

        <!-- Pilihan tanggal -->
        <div class="mb-4">
          <label for="reservationDate" class="block text-sm font-medium text-gray-700">Choose Date</label>
          <select name="reservationDate" id="reservationDate" class="form-input mt-1 block w-full">
            {% for date in available_dates %}
              <option value="{{ date }}" {% if existing_reservation and existing_reservation.reservation_date == date %}selected{% endif %}>{{ date }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Pilihan waktu -->
        <div class="mb-4">
          <label for="reservationTime" class="block text-sm font-medium text-gray-700">Choose Time</label>
          <select name="reservationTime" id="reservationTime" class="form-input mt-1 block w-full">
            {% for time in available_times %}
              <option value="{{ time }}" {% if existing_reservation and existing_reservation.reservation_time == time %}selected{% endif %}>{{ time }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Tests -->
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700">Choose Tests</label>
          <div>
            <label><input type="checkbox" name="tests1" value="Blood Pressure Check" {% if 'Blood Pressure Check' in existing_reservation.tests %}checked{% endif %}> Blood Pressure Check</label>
          </div>
          <div>
            <label><input type="checkbox" name="tests2" value="Cholesterol Check" {% if 'Cholesterol Check' in existing_reservation.tests %}checked{% endif %}> Cholesterol Check</label>
          </div>
          <div>
            <label><input type="checkbox" name="tests3" value="Blood Sugar Test" {% if 'Blood Sugar Test' in existing_reservation.tests %}checked{% endif %}> Blood Sugar Test</label>
          </div>
          <div>
            <label><input type="checkbox" name="tests4" value="X-ray" {% if 'X-ray' in existing_reservation.tests %}checked{% endif %}> X-ray</label>
          </div>
          <div>
            <label><input type="checkbox" name="tests5" value="Urine Test" {% if 'Urine Test' in existing_reservation.tests %}checked{% endif %}> Urine Test</label>
          </div>
        </div>

        <!-- Submit Button -->
        <div>
          <input type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 focus:outline-none cursor-pointer" value="{% if existing_reservation %}Change Reservation{% else %}Create Reservation{% endif %}">
        </div>
      </form>
    </div>
  </main>
</div>
{% endblock %}
